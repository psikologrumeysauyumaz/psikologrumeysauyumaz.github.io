<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Psikoloji Testleri - Psikolog Rümeysa Uyumaz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Inter', sans-serif;
            color: #333333;
            background-color: #FFFFFF;
            line-height: 1.6;
        }
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
            line-height: 1.3;
        }
        .floating-nav {
            backdrop-filter: blur(16px) saturate(180%);
            background-color: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(200, 200, 200, 0.3);
        }
        .btn-primary {
            background: linear-gradient(135deg, #166534, #14532D);
            color: white;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 8px rgba(22, 101, 52, 0.2);
        }
        .btn-primary:hover {
            background: linear-gradient(135deg, #14532D, #16A34A);
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(22, 101, 52, 0.3);
        }
        .test-card {
            background: white;
            border-radius: 16px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 1px solid rgba(200, 200, 200, 0.2);
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 100%;
            gap: 1.5rem;
        }
        .test-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #166534, #16A34A);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        .test-card:hover::before {
            transform: scaleX(1);
        }
        .test-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(22, 101, 52, 0.1);
        }
        .test-card-content {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            flex: 1 1 auto;
        }
        .test-card-content h3 {
            line-height: 1.35;
        }
        .test-card button {
            margin-top: auto;
        }
        .test-category {
            background: linear-gradient(135deg, #F0F9FF, #E0F2FE);
            color: #166534;
            font-weight: 600;
            font-size: 0.875rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: inline-block;
            margin-bottom: 1rem;
        }
        .test-stats {
            display: flex;
            gap: 1.5rem;
            color: #666;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }
        .test-stat {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }
        .hero-gradient {
            background: linear-gradient(135deg, #F0F9FF, #E0F2FE);
        }
        .section-bg {
            background-color: #F9FCFF;
        }
    </style>
</head>
<body class="antialiased">
    <!-- Floating Navigation -->
    <nav class="floating-nav fixed top-4 left-4 right-4 mx-auto max-w-7xl rounded-lg shadow-lg z-50 py-3 px-6 flex justify-between items-center transition-all duration-500" style="max-width: 1200px;" id="mainNav">
        <div class="text-xl font-semibold" style="color: #333333; font-family: 'Playfair Display', serif;">
            <a href="index.html">Psk. Rümeysa Uyumaz</a>
        </div>
        <div class="hidden md:flex space-x-8">
            <a href="index.html#home" class="hover:text-[#16A34A] transition-colors">Ana Sayfa</a>
            <a href="index.html#about" class="hover:text-[#16A34A] transition-colors">Hakkımda</a>
            <a href="testler.html" class="text-[#16A34A] font-medium">Testler</a>
            <a href="index.html#contact" class="hover:text-[#16A34A] transition-colors">İletişim</a>
        </div>
        <div class="md:hidden cursor-pointer" onclick="toggleDrawer()">
            <i data-feather="menu"></i>
        </div>
    </nav>

    <!-- Mobile Drawer -->
    <div id="mobileDrawer" class="fixed inset-0 z-40 bg-black bg-opacity-50 transition-opacity duration-300 opacity-0 pointer-events-none">
        <div class="absolute right-0 top-0 h-full w-64 bg-white transform transition-transform duration-300 translate-x-full">
            <div class="p-6">
                <div class="flex justify-between items-center mb-8">
                    <div class="text-xl font-semibold" style="color: #333333; font-family: 'Playfair Display', serif;">Menü</div>
                    <button onclick="toggleDrawer()" class="p-2">
                        <i data-feather="x" class="w-6 h-6"></i>
                    </button>
                </div>
                <div class="space-y-6">
                    <a href="index.html#home" class="block py-2 hover:text-[#16A34A] transition-colors" onclick="toggleDrawer()">Ana Sayfa</a>
                    <a href="index.html#about" class="block py-2 hover:text-[#16A34A] transition-colors" onclick="toggleDrawer()">Hakkımda</a>
                    <a href="testler.html" class="block py-2 text-[#16A34A] font-medium" onclick="toggleDrawer()">Testler</a>
                    <a href="index.html#contact" class="block py-2 hover:text-[#16A34A] transition-colors" onclick="toggleDrawer()">İletişim</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero-gradient pt-32 md:pt-28 pb-16 px-4 md:px-8">
        <div class="max-w-4xl mx-auto text-center" data-aos="fade-up">
            <h1 class="text-4xl md:text-5xl font-bold mb-6" style="color: #333333;">Kendinizi Keşfedin</h1>
            <p class="text-lg md:text-xl mb-8 max-w-2xl mx-auto text-gray-700">
                Bilimsel temelli psikoloji testleri ile kişiliğinizi, ilişki tarzınızı ve duygusal zekanızı keşfedin.
                Her test, kişisel gelişiminiz için değerli içgörüler sunar.
            </p>
            <div class="bg-white px-6 py-3 rounded-full shadow-sm inline-block border border-gray-100">
                <p class="text-sm text-gray-700 font-medium">Tamamen ücretsiz • Detaylı analiz • Kişiselleştirilmiş öneriler</p>
            </div>
        </div>
    </section>

    <!-- Tests Grid Section -->
    <section class="py-16 px-4 md:px-8">
        <div class="max-w-7xl mx-auto" id="tests-container">
            <!-- Dynamic test categories will be loaded here -->
            <div class="text-center py-8">
                <div class="animate-pulse text-gray-500">Testler yükleniyor...</div>
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="section-bg py-16 px-4 md:px-8">
        <div class="max-w-4xl mx-auto text-center">
            <h2 class="text-3xl font-bold mb-6">Test Sonuçlarınızı Derinleştirin</h2>
            <p class="text-lg mb-8 text-gray-700">
                Test sonuçlarınız hakkında daha fazla bilgi almak ve kişisel gelişiminiz için
                profesyonel destek almak ister misiniz?
            </p>
            <a href="index.html#contact" class="btn-primary inline-block px-10 py-4 rounded-lg text-white font-medium">Ücretsiz Ön Görüşme Alın</a>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-8 px-4 border-t border-gray-200">
        <div class="max-w-6xl mx-auto text-center text-sm" style="color: #333333;">
            <div class="mb-2">
                <a href="mailto:psikolog.rumeysauyumaz@example.com" class="hover:text-[#16A34A] transition-colors">psikolog.rumeysauyumaz@example.com</a> •
                <a href="tel:+905551234567" class="hover:text-[#16A34A] transition-colors">+90 555 123 45 67</a>
            </div>
            <div>© 2023 Psikolog Rümeysa Uyumaz. Tüm hakları saklıdır.</div>
        </div>
    </footer>

    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true,
            offset: 120,
            easing: 'ease-out-cubic'
        });
        feather.replace();

        // Dinamik test yükleme sistemi
        async function loadTestsFromFolder() {
            console.log('Test klasöründen dinamik yükleme başlatılıyor...');
            
            // Test dosyalarının listesi
            const testFiles = [
                'TEST 1: BAĞLANMA STİLİ PROFİL ANALİZİ.json',
                'TEST 2: AŞK DİLİ KEŞİF TESTİ.json',
                'TEST 3: İLETİŞİM STİLİ DEĞERLENDİRMESİ.json',
                'TEST 4: ÇİFT UYUMLULUK VE DİNAMİK ANALİZİ.json',
                'TEST 5: DUYGUSAL ZEKA YETKİNLİK TESTİ.json',
                'TEST 6: DARK TRIAD KİŞİLİK SPEKTRUMU.json',
                'TEST 7: ÖZGÜVEN VE BENLİK SAYGISI ANALİZİ.json',
                'TEST 8: KAYGI DÜZEYİ DEĞERLENDİRME.json',
                'TEST 9: SOSYAL ZEKA VE İLİŞKİ YÖNETİMİ.json',
                'TEST 10: STRES YÖNETİMİ VE DAYANIKLILIK.json',
                'TEST 11: MOTİVASYON VE HEDEF YÖNELİMİ.json',
                'TEST 12: YARATICILIK VE İNOVASYON POTANSİYELİ.json',
                'TEST 13: ÇATIŞMA ÇÖZME VE MÜZAKERE BECERİLERİ.json',
                'TEST 14: KARAR VERME SÜRECİ VE BİLİŞSEL STİL ANALİZİ.json',
                'TEST 15: LİDERLİK STİLLERİ VE YAKLAŞIMLARI ANALİZİ.json',
                'TEST 16: DEĞERLER, İNANÇLAR VE DÜNYA GÖRÜŞÜ ANALİZİ.json',
                'TEST 17: BİLİŞSEL YETENEĞİ VE IQ DEĞERLENDİRME.json',
                'TEST 18: MİNDFULNESS VE BİLİNÇLİ FARKINDALIK DÜZEYİ.json',
                'TEST 19: DEPRESYON RİSK DEĞERLENDİRME.json',
                'TEST 20: İŞ-YAŞAM DENGESİ VE UYUM DEĞERLENDİRMESİ.json',
                'TEST 21: SOSYAL MEDYA KİŞİLİĞİ VE DİJİTAL ANALİZİ.json',
                'TEST 22: 2025 KİŞİLİK TAHMİNİ VE GELECEK SENARYOLARI.json'
            ];

            const tests = [];
            
            // Her test dosyasını yükle
            for (let i = 0; i < testFiles.length; i++) {
                try {
                    console.log(`Yükleniyor: ${testFiles[i]}`);
                    const response = await fetch(`tests/${testFiles[i]}`);
                    if (!response.ok) {
                        console.warn(`Test yüklenemedi: ${testFiles[i]}`);
                        continue;
                    }
                    
                    const testData = await response.json();
                    
                    // Test türünü filename'den çıkar
                    const testType = generateTestType(testFiles[i]);
                    
                    tests.push({
                        type: testType,
                        filename: testFiles[i],
                        ...testData
                    });
                } catch (error) {
                    console.error(`Hata yüklenirken ${testFiles[i]}:`, error);
                }
            }
            
            console.log(`${tests.length} test yüklendi`);
            return tests;
        }

        // Filename'den test type üret
        function generateTestType(filename) {
            const testName = filename.replace('.json', '').replace(/^TEST \d+: /, '');
            return testName
                .toLowerCase()
                .replace(/[^a-z0-9\s]/g, '')
                .replace(/\s+/g, '-')
                .replace(/ğ/g, 'g')
                .replace(/ü/g, 'u')
                .replace(/ş/g, 's')
                .replace(/ı/g, 'i')
                .replace(/ö/g, 'o')
                .replace(/ç/g, 'c')
                .trim();
        }

        // Testleri kategorilere göre grupla ve renderla
        async function populateTestsDynamic() {
            console.log('Dinamik test yükleme başlıyor...');
            
            const mainContainer = document.getElementById('tests-container');
            if (!mainContainer) {
                console.error('tests-container bulunamadı!');
                return;
            }
            
            try {
                const tests = await loadTestsFromFolder();
                if (tests.length === 0) {
                    mainContainer.innerHTML = '<div class="text-center py-8 text-red-600">Test yüklenemedi</div>';
                    return;
                }

                // Kategorilere grupla
                const categories = {};
                
                tests.forEach(test => {
                    // Metadata varsa kullan, yoksa default değerler
                    const category = test.metadata?.category || 'Diğer Testler';
                    const categoryIcon = test.metadata?.categoryIcon || '📝';
                    const categoryOrder = test.metadata?.categoryOrder || 99;
                    const testOrder = test.metadata?.testOrder || 99;
                    
                    if (!categories[category]) {
                        categories[category] = {
                            icon: categoryIcon,
                            order: categoryOrder,
                            tests: []
                        };
                    }
                    
                    categories[category].tests.push({
                        ...test,
                        order: testOrder
                    });
                });

                // Kategorileri sırala
                const sortedCategories = Object.keys(categories)
                    .sort((a, b) => categories[a].order - categories[b].order);

                mainContainer.innerHTML = '';

                // Her kategori için HTML oluştur
                for (const categoryName of sortedCategories) {
                    const categoryData = categories[categoryName];
                    
                    // Kategori içindeki testleri sırala
                    categoryData.tests.sort((a, b) => a.order - b.order);

                    const categorySection = document.createElement('div');
                    categorySection.className = 'mb-16';
                    categorySection.innerHTML = `
                        <h2 class="text-3xl font-bold mb-8 text-center">${categoryData.icon} ${categoryName}</h2>
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8"></div>
                    `;
                    const gridContainer = categorySection.querySelector('.grid');

                    // Her test için kart oluştur
                    categoryData.tests.forEach(test => {
                        const card = document.createElement('div');
                        card.className = 'test-card p-8 shadow-lg';

                        const title = test.testInfo?.title || 'İsimsiz Test';
                        const rawDescription = test.testInfo?.description || '';
                        const descriptionSnippet = rawDescription
                            ? `${rawDescription.substring(0, 150)}${rawDescription.length > 150 ? '...' : ''}`
                            : 'Detaylar yakında.';
                        const duration = test.testInfo?.duration || 'Süre bilgisi yakında';

                        card.innerHTML = `
                            <div class="test-card-content">
                                <h3 class="text-2xl font-semibold mb-4">${title}</h3>
                                <p class="text-gray-600 mb-4">${descriptionSnippet}</p>
                            </div>
                            <div class="test-stats">
                                <div class="test-stat">
                                    <i data-feather="clock" class="w-4 h-4"></i>
                                    <span>${duration}</span>
                                </div>
                            </div>
                            <button type="button" class="btn-primary w-full py-3 rounded-lg font-medium mt-4">Testi Başlat</button>
                        `;

                        const startButton = card.querySelector('button');
                        startButton.addEventListener('click', () => startTest(test.filename));

                        gridContainer.appendChild(card);
                    });

                    mainContainer.appendChild(categorySection);
                }
                
                console.log('Tüm testler yüklendi, feather iconları güncelleniyor...');
                feather.replace();

                if (window.AOS) {
                    if (typeof window.AOS.refreshHard === 'function') {
                        window.AOS.refreshHard();
                    } else if (typeof window.AOS.refresh === 'function') {
                        window.AOS.refresh();
                    }
                }
                
            } catch (error) {
                console.error('Test yükleme hatası:', error);
                mainContainer.innerHTML = '<div class="text-center py-8 text-red-600">Testler yüklenirken hata oluştu</div>';
            }
        }

        // Sayfa yüklendiğinde testleri yükle
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', populateTestsDynamic);
        } else {
            populateTestsDynamic();
        }

        // Fallback - ensure tests load after a short delay
        setTimeout(() => {
            const container = document.getElementById('tests-container');
            if (container && container.children.length === 1 && container.textContent.includes('yükleniyor')) {
                console.log('Fallback: Re-running populateTestsDynamic');
                populateTestsDynamic();
            }
        }, 2000);

        // Enhanced nav behavior with throttling
        let lastScrollTop = 0;
        let ticking = false;
        const nav = document.getElementById('mainNav');

        function updateNavOnScroll() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

            if (scrollTop > 50) {
                nav.style.background = 'rgba(255, 255, 255, 0.98)';
                nav.style.backdropFilter = 'blur(20px) saturate(180%)';
            } else {
                nav.style.background = 'rgba(255, 255, 255, 0.95)';
                nav.style.backdropFilter = 'blur(16px) saturate(180%)';
            }

            lastScrollTop = scrollTop;
            ticking = false;
        }

        window.addEventListener('scroll', function() {
            if (!ticking) {
                requestAnimationFrame(updateNavOnScroll);
                ticking = true;
            }
        }, { passive: true });

        // Mobile drawer functions
        function toggleDrawer() {
            const drawer = document.getElementById('mobileDrawer');
            const drawerContent = drawer.querySelector('div > div');
            const nav = document.getElementById('mainNav');

            if (drawer.classList.contains('opacity-0')) {
                drawer.classList.remove('opacity-0', 'pointer-events-none');
                drawer.classList.add('opacity-100', 'pointer-events-auto');
                drawerContent.classList.remove('translate-x-full');
                drawerContent.classList.add('translate-x-0');
                document.body.style.overflow = 'hidden';
                nav.style.display = 'none';
            } else {
                drawer.classList.remove('opacity-100', 'pointer-events-auto');
                drawer.classList.add('opacity-0', 'pointer-events-none');
                drawerContent.classList.remove('translate-x-0');
                drawerContent.classList.add('translate-x-full');
                document.body.style.overflow = '';
                nav.style.display = 'flex';
            }
        }

        document.getElementById('mobileDrawer').addEventListener('click', function(e) {
            if (e.target === this) {
                toggleDrawer();
            }
        });

        // Test başlatma fonksiyonu
        function startTest(testFileName) {
            const encoded = encodeURIComponent(testFileName);
            window.location.href = `test.html?file=${encoded}`;
        }
    </script>
</body>
</html>